# …

CAVEAT: modern versions of pdfthtml do not support "-xml" any longer.

################################################################################

Usage: pdftohtml [options] <PDF-file> [<html-file> <xml-file>]
  …
  -upw <string>         : user password (for encrypted files)
  …

see ~/git-servers/github.com/JochenHayek/misc/using_timestamps_in_filenames/pdf-suggest-rename-as_vouchers--with_password.sh ,
it shows a relevant example.

################################################################################

/usr/local/Cellar/poppler/21.05.0/bin/pdftohtml seems to deal with "-xml"
and better /Applications/calibre.app/Contents/utils.app/Contents/MacOS/pdftohtml :

	[2023-12-15 13:06:46] johayek@Hayek003 $ /usr/local/Cellar/poppler/21.05.0/bin/pdftohtml -xml -i -nomerge -hidden 20231215034058--Rahmenvertrag_fuer_Pro.pdf 
	Page-1
	Page-2
	Page-3
	Page-4
	Page-5
	Page-6
	Page-7
	…


################################################################################

                                                            pdftohtml -xml -i -nomerge -hidden FILE.pdf FILE.pdftohtml.xml
                                  /usr/local/xpdf-tools/bin/pdftohtml -xml -i -nomerge -hidden FILE.pdf FILE.pdftohtml.xml      # 2021-01-16 : does not support "-xml" (any longer)

                                             /usr/local/bin/pdftohtml -xml -i -nomerge -hidden FILE.pdf FILE.pdftohtml.xml // brew install poppler

                                                      ~/bin/pdftohtml -xml -i -nomerge -hidden FILE.pdf FILE.pdftohtml.xml      # 2021-01-16 : MBP: /Applications/calibre.app/Contents/utils.app/Contents/MacOS/pdftohtml
                                                   /opt/bin/pdftohtml -xml -i -nomerge -hidden FILE.pdf FILE.pdftohtml.xml      # 2021-01-16 : diskstation003: /opt/bin/pdftohtml AKA /volume1/@entware/opt/bin/pdftohtml does support "-xml"
                                                /opt/sw/bin/pdftohtml -xml -i -nomerge -hidden FILE.pdf FILE.pdftohtml.xml
                                                      ~/bin/pdftohtml -xml -i -nomerge -hidden FILE.pdf FILE.pdftohtml.xml

# within Emacs dired-mode leave out the file params:

                                     pdftohtml -xml -i -nomerge -hidden

# >= 2021-12-01 : /usr/local/bin/pdftohtml no more supports "-nomerge" and the content will no longer include the true and well-known content:

                                     pdftohtml -xml -i -nomerge -hidden

# the resulting file will be named FILE.xml than,
# but we can change that easily,
# and that's the least effort and hassle all together.

~/git-servers/github.com/JochenHayek/misc/pdf/pdftohtml__postprocess.pl

################################################################################

/Applications/calibre.app/Contents/utils.app/Contents/MacOS/pdftohtml

2021-01-16 : 

	pdftohtml version 0.76.1
	Copyright 2005-2019 The Poppler Developers - http://poppler.freedesktop.org
	Copyright 1999-2003 Gueorgui Ovtcharov and Rainer Dorsch

################################################################################

[2021-01-17 23:25:14] johayek@Hayek003 $ brew install poppler

[2021-01-17 23:29:47] johayek@Hayek003 $ env DYLD_LIBRARY_PATH=/System/Library/Frameworks/ImageIO.framework/Resources:$DYLD_LIBRARY_PATH /usr/local/bin/pdftohtml 
pdftohtml version 21.01.0
Copyright 2005-2021 The Poppler Developers - http://poppler.freedesktop.org
Copyright 1999-2003 Gueorgui Ovtcharov and Rainer Dorsch
Copyright 1996-2011 Glyph & Cog, LLC

Usage: pdftohtml [options] <PDF-file> [<html-file> <xml-file>]
  -f <int>              : first page to convert
  -l <int>              : last page to convert
  -q                    : don't print any messages or errors
  -h                    : print usage information
  -?                    : print usage information
  -help                 : print usage information
  --help                : print usage information
  -p                    : exchange .pdf links by .html
  -c                    : generate complex document
  -s                    : generate single document that includes all pages
  -i                    : ignore images
  -noframes             : generate no frames
  -stdout               : use standard output
  -zoom <fp>            : zoom the pdf document (default 1.5)
  -xml                  : output for XML post-processing


################################################################################

[2021-01-16 18:02:57] johayek@DiskStation003 $ ~/bin/sl !$
~/bin/sl /opt/bin/pdftohtml

/opt/bin/pdftohtml:
/opt -> /volume1/@entware/opt
/volume1/@entware/opt/bin/pdftohtml

================================================================================

in the shell on Rechnung.pdf

	~/bin/pdf-suggest-rename-as_vouchers.sh [a-zA-Z]*.pdf

in Emacs dired-mode on ___.pdf :

	~/bin/pdftohtml -xml -i -nomerge -hidden

in Emacs dired-mode on the *.xml :

	~/bin/rename 's/xml$/pdftohtml.xml/'

within the Emacs buffer with "C-x h C-u M-x shell-command-on-region":

	~/bin/pdftohtml__postprocess.pl

within the Emacs buffer with "C-x h M-x indent-region":

	indent-region
…

	sort-lines

…

	sort | ~/bin/pdftohtml__adapt_top.pl | sort

…

	~/git-servers/ber.jochen.hayek.name/johayek/renaming_and_processing_various_files/___.annotating_with_CAVEAT.pl

		<!-- CAVEAT: {}=>{} -->

	how to remove those CAVEAT annotations?

		"	*<!-- caveat:.*-->"

…

	sort --key 1.29,1.33 --key 1.17,1.21

	sort --key 1.29,1.33 --key 1.17,1.21 | ~/bin/pdftohtml__adapt_left.pl | sort --key 1.29,1.33 --key 1.17,1.21

	~/bin/pdftohtml__adapt_top.pl | sort

…

	…

…

	~/git-servers/ber.jochen.hayek.name/johayek/renaming_and_processing_various_files/___.create_bank_transaction_details.sh

================================================================================

~/.emacs.d/gnu-emacs ->
~/git-servers/ber.jochen.hayek.name/johayek/misc/DOTfiles/.emacs.d/gnu-emacs :

;; ==========

;; https://emacsdocs.org/docs/emacs/Keyboard-Macros
;; https://emacsdocs.org/docs/emacs/Save-Keyboard-Macro

;; https://www.gnu.org/software/emacs/manual/html_node/emacs/Keyboard-Macros.html
;; https://www.gnu.org/software/emacs/manual/html_node/emacs/Edit-Keyboard-Macro.html

;;kmacro-edit-macro

;; ==========

;;~/bin/pdftohtml__join.pl

(defalias 'pdftohtml-join
   (kmacro "C-u <escape> | ~ / b i n / p d f t o h t m l _ _ j o i n . p l <return>"))

;; ==========

;;sort --key 1.29,1.33 --key 1.17,1.21
;;kmacro-edit-macro

(defalias 'pdftohtml-sort-by-column
   (kmacro "C-u M-| s o r t SPC - - k e y SPC 1 . 2 9 , 1 . 3 3 SPC - - k e y SPC 1 . 1 7 , 1 . 2 1 RET"))

;; ==========

;;~/bin/pdftohtml__adapt_top.pl | sort

(defalias 'pdftohtml-adapt-top
   (kmacro "C-u M-| ~ / b i n / p d f t o h t m l _ _ a d a p t _ t o p . p l SPC | SPC s o r t RET"))

;; ==========

;;sort --key 1.29,1.33 --key 1.17,1.21 | ~/bin/pdftohtml__adapt_left.pl | sort --key 1.29,1.33 --key 1.17,1.21

(defalias 'pdftohtml-adapt-left
   (kmacro "C-u M-| s o r t SPC - - k e y SPC 1 . 2 9 , 1 . 3 3 SPC - - k e y SPC 1 . 1 7 , 1 . 2 1 SPC | SPC ~ / b i n / p d f t o h t m l _ _ a d a p t _ l e f t . p l SPC | SPC s o r t SPC - - k e y SPC 1 . 2 9 , 1 . 3 3 SPC - - k e y SPC 1 . 1 7 , 1 . 2 1 RET"))

;; ==========

;;~/git-servers/github.com/JochenHayek/misc/pdf/pdftohtml__annotating_with_CAVEAT__lvalue.pl

(defalias 'pdftohtml-annotating-with-CAVEAT-lvalue
   (kmacro "C-u M-| ~ / b i n / p d f t o h t m l _ _ a n n o t a t i n g _ w i t h _ C A V E A T _ _ l v a l u e . p l RET"))

;; ==========

;;~/git-servers/github.com/JochenHayek/misc/pdf/pdftohtml__annotating_with_CAVEAT__lvalue_only.pl

(defalias 'pdftohtml-annotating-with-CAVEAT-lvalue-only
   (kmacro "C-u M-| ~ / b i n / p d f t o h t m l _ _ a n n o t a t i n g _ w i t h _ C A V E A T _ _ l v a l u e _ o n l y . p l RET"))

;; ==========

;;~/git-servers/github.com/JochenHayek/misc/pdf/pdftohtml__annotating_with_CAVEAT__rvalue.pl

(defalias 'pdftohtml-annotating-with-CAVEAT-rvalue
   (kmacro "C-u M-| ~ / b i n / p d f t o h t m l _ _ a n n o t a t i n g _ w i t h _ C A V E A T _ _ r v a l u e . p l RET"))

================================================================================
